---
layout: tutorial
---


Sequences
---------

The sequence, *seq* is the type of both lists and lazy lists.
*seq* be used as the type of a function to denote that the function expects any kind of sequence as parameter.
*seq* is also the constructor for lazy lists.


<hr>

Lists
-----

Lists are mutable. Operations on lists normally return the list operated upon.
If there is a type mismatch, a **none** object is produced.


<hr>

Tuples
------

Tuples have much of the same functionality as lists but they are not *sequences*.
*tuple* and *seq* are *not* interchangeable types.


<hr>

Building lists
--------------

To build a **list**, use the empty list as a constructor:

        var (: 'some-list' [] )

<hr>

Appending elements to lists
---------------------------

Any object passed to a list is appended to the list.

        ( some-list 4 5 6 )

<hr>

Merging
-------

To merge a **list** with another **seq**, one uses the merge method. Merge takes a list as an argument.

        ( some-list merge ( [] 7 8 9 ) .)

<hr>

Lazy lists
----------

Lazy lists are programs that produce elements.

        var (: 'some-seq' ( seq [ ( yield 1 .) ( yield 2 .) ( yield 3 .) ] ) )

To produce a lazy list one uses **seq** as a constructor. It takes a *seq* as an argument.
The argument is the expression that defines the sequence.

Notice that the above generator uses **yield* to emit elements.
**some-seq** is the sequence of 1, 2 and 3.

<hr>

Sequences
---------

Lists and lazy lists share the mechanism for iteration. This means that when building e.g. a function that uses a list as
a parameter, it is often better to use the type **seq** instead. That way, the function can receive both lists and lazy lists.

        fun (: 'do-something-to-all-elements' ( set ) [ ... ] )

<hr>

Lazy list to list
-----------------

Lazy lists do not support **append** and **merge**, but it is possible to merge a lazy list into a list.

        ( some-list merge ( some-generator ) .)

This will append all elements generated by some-generator into some-list. The generator needs to terminate for this to work.
This effectively converts a generator to a static list.

The **merge** method of lists takes a **seq** as its parameter.

<hr>

Iterating
---------

To iterate over a sequence, list or generator, one must create an iterator object using the word **each**.

        var (: 'elements' ( some-seq each ) )

Then one can use the word **next** to get the next element in the list.

        ( elements next )

The type of an iterator is **iterator**.

The following code iterates over all elements of **some-seq** and outputs them.

        const (: 'elements' ( some-seq each ) )
        loop [
          console write ( elements next else [ stop ] ) newl
        ]

**some-seq** can be either a list or a generator, or an other type of seq.
All the functionality necessary to build a sequence is user definable.


<hr>

Quoted expressions
------------------

Quoted expressions are also sequence.
They can constructed normally and then passed as code-blocks

The fact that quoted expressions are also sequences means that anywhere a quoted expression is used,
one can have an expression that builds a sequence.
This makes it possible to build code dynamically without dealing with *eval* and related complications.

It is even possible to pass user-defined sequences as code blocks to built-in functionality like *then*, *else*, *loop*, *does* and so on.

